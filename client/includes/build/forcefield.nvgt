void buildforcefield() {
    if (d2dsupport == 0) {
        form.reset();
        string nums = "1234567890-";
        string mx, mmx, my, mmy, mz, mmz, forcefieldtime, forcefieldhealth;
        form.create_window("forcefield", false);
        int a = form.create_input_box("type the minimum &x of the forcefield area");
        int b = form.create_input_box("type the maximum &x of the forcefield area");
        int c = form.create_input_box("type the minimum &y of the forcefield area");
        int d = form.create_input_box("type the maximum &y of the forcefield area");
        int e = form.create_input_box("type the minimum &z of the forcefield area");
        int f = form.create_input_box("type the maximum &z of the forcefield area");
        int g = form.create_input_box("how many milliseconds should be waited before next forcefield appearance");
        int h = form.create_input_box("how much health should it take per each damage");
        form.set_disallowed_chars(a, nums, true);
        form.set_disallowed_chars(b, nums, true);
        form.set_disallowed_chars(c, nums, true);
        form.set_disallowed_chars(d, nums, true);
        form.set_disallowed_chars(e, nums, true);
        form.set_disallowed_chars(f, nums, true);
        form.set_disallowed_chars(g, nums, true);
        form.set_disallowed_chars(h, nums, true);
        int ok = form.create_button("continue and select the sounds", false);
        int can = form.create_button("cancel", false, true);
        form.focus(a);

        while (true) {
            wait(5);
            form.monitor(); mainloop();
            mx              = form.get_text(a);
            mmx             = form.get_text(b);
            my              = form.get_text(c);
            mmy             = form.get_text(d);
            mz              = form.get_text(e);
            mmz             = form.get_text(f);
            forcefieldtime  = form.get_text(g);
            forcefieldhealth= form.get_text(h);
            if (form.is_pressed(ok)) {
                form.reset();
                break;
            } else if (form.is_pressed(can)) {
                form.reset();
                return;
            }
        }

        if (mx == "" || mmx == "" || my == "" || mmy == "" || mz == "" || mmz == "" || forcefieldtime == "" || forcefieldhealth == "") {
            speak("canceled");
            return;
        }

        string forcefieldsound = list_forcefieldsounds();
        if (forcefieldsound == "") return;

        string forcefieldhitsound = list_forcefieldhitsounds();
        if (forcefieldhitsound == "") return;

        send_reliable(peer_id, "addforcefield forcefield:" + mx + ":" + mmx + ":" + my + ":" + mmy + ":" + mz + ":" + mmz + ":" + forcefieldtime + ":" + forcefieldhealth + ":" + forcefieldsound + ".ogg:" + forcefieldhitsound + ".ogg", 0);
    }
    else {
        form.reset();
        string nums = "1234567890-";
        string mx, mmx, my, mmy, forcefieldtime, forcefieldhealth;
        form.create_window("forcefield", false);
        int a = form.create_input_box("type the minimum &x of the forcefield area");
        int b = form.create_input_box("type the maximum &x of the forcefield area");
        int c = form.create_input_box("type the minimum &y of the forcefield area");
        int d = form.create_input_box("type the maximum &y of the forcefield area");
        int e = form.create_input_box("how many milliseconds should be waited before next forcefield appearance");
        int f = form.create_input_box("how much health should it take per each damage");
        form.set_disallowed_chars(a, nums, true);
        form.set_disallowed_chars(b, nums, true);
        form.set_disallowed_chars(c, nums, true);
        form.set_disallowed_chars(d, nums, true);
        form.set_disallowed_chars(e, nums, true);
        form.set_disallowed_chars(f, nums, true);
        int ok = form.create_button("continue and select the sounds", false);
        int can = form.create_button("cancel", false, true);
        form.focus(a);

        while (true) {
            wait(5);
            form.monitor(); mainloop();
            mx              = form.get_text(a);
            mmx             = form.get_text(b);
            my              = form.get_text(c);
            mmy             = form.get_text(d);
            forcefieldtime  = form.get_text(e);
            forcefieldhealth= form.get_text(f);
            if (form.is_pressed(ok)) {
                form.reset();
                break;
            } else if (form.is_pressed(can)) {
                form.reset();
                return;
            }
        }

        if (mx == "" || mmx == "" || my == "" || mmy == "" || forcefieldtime == "" || forcefieldhealth == "") {
            speak("canceled");
            return;
        }

        string forcefieldsound = list_forcefieldsounds();
        if (forcefieldsound == "") return;

        string forcefieldhitsound = list_forcefieldhitsounds();
        if (forcefieldhitsound == "") return;

        send_reliable(peer_id, "addforcefield forcefield:" + mx + ":" + mmx + ":0:0:" + my + ":" + mmy + ":" + forcefieldtime + ":" + forcefieldhealth + ":" + forcefieldsound + ".ogg:" + forcefieldhitsound + ".ogg", 0);
    }
}